<!-- MAIN CONTENT -->
<h5 class="page-header">Documentation</h5>

<p>The following documentation is supplimental material on the following topics:
<ul>
  <li><a href="#removingmaf">Removing MAF</a></li>
  <li><a href="#preferences">MAF preferences</a></li>
  <li><a href="#scripts">MAF scripts</a></li>
</ul>
</p>

<a name="removingmaf" />
<h2>Removing MAF</h2>

<p>For version 0.3.0 with Firefox 0.9 or higher, use the built in uninstall from the extension manager. Since MAF scripts and temporary folders are in the profile folder, remove the maf folder and any sub-folders or files that are present.</p>

<p>For version 0.3.0 with Mozilla 1.7+ or Firefox 0.8, go to the profile folder and under the chrome directory remove maf.jar. Edit the chrome.rdf and remove all the RDF descriptions that contain MAF. There should also be an overlayinfo folder. In the browser/content/overlays.rdf file remove the RDF list item entry with MAF. If it is the only entry, you may remove the entire file. In the navigator/content/overlays.rdf perform the same action. Since MAF scripts and temporary folders are in the profile folder, remove the maf folder and any sub-folders or files that are present.</p>

<p>For version 0.2.20 and below, MAF installed globally. In windows, MAF scripts and supporting files were created in c:\temp\maf. In linux, the scripts were created in /tmp/maf. Remove the maf folder from the temporary folder. In your browser installation folder enter the chrome subfolder. There you should find a maf.jar. Delete it. There is also a file named installed-chrome.txt. Edit it and remove lines that contain maf.jar (there should be 3). There should also be an overlayinfo folder. In the browser/content/overlays.rdf file remove the RDF list item entry with MAF. If it is the only entry, you may remove the entire file. In the navigator/content/overlays.rdf perform the same action.</p>

<p>In all versions, MAF preferences would have been saved if the defaults were not used. In the browser location bar, go to about:config. In the filter box that comes up, type in maf. To remove the maf settings, right click on each maf preference entry and select reset. Alternately you can find the prefs.js file in your profile folder and remove all maf user_pref entries.</p>

<br />

<a name="preferences" />
<h2>MAF preferences</h2>

<p>MAF has many preferences, most of which can be accessed using the GUI preferences panel. This section describes the use of each preference found under about:config and filtered with maf.</p>

<table border="0" cellpadding="5" cellspacing="5" valign="top">
  <tr>
    <td>Preference</td>
    <td>Type</td>
    <td>Description</td>
  </tr>
  <tr>
    <td>maf.archiveopenmode</td>
    <td>integer</td>
    <td>One of three values 0, 1, or 2 to determine the action to take when a MAF archive is opened. 0 - Do nothing, 1 - Open all pages in the archive in tabs, 2 - Browse archive dialog.</td>
  </tr>
  <tr>
    <td>maf.clearTempOnClose</td>
    <td>boolean</td>
    <td>true if the temporary folder, maftemp, should be deleted and re-created on the close of the browser.</td>
  </tr>
  <tr>
    <td>maf.defaultmafhandler</td>
    <td>integer</td>
    <td>The default extension registration that is associated with .maf</td>
  </tr>
  <tr>
    <td>maf.ext.0.archive</td>
    <td>string</td>
    <td>Full path and filename of the script used by extension 0 to create an archive.</td>
  </tr>
  <tr>
    <td>maf.ext.0.extract</td>
    <td>string</td>
    <td>Full path and filename of the script used by extension 0 to extract an archive.</td>
  </tr>
  <tr>
    <td>maf.ext.0.id</td>
    <td>string</td>
    <td>The id of extension 0.</td>
  </tr>
  <tr>
    <td>maf.ext.0.mask.0</td>
    <td>string</td>
    <td>The first matching mask for extension 0.</td>
  </tr>
  <tr>
    <td>maf.ext.0.mask.1</td>
    <td>string</td>
    <td>The second matching mask for extension 0.</td>
  </tr>
  <tr>
    <td>maf.ext.0.masklength</td>
    <td>integer</td>
    <td>The number of masks that match for this extension.</td>
  </tr>
  <tr>
    <td>maf.noofextensions</td>
    <td>integer</td>
    <td>The number of extensions that are registered.</td>
  </tr>
  <tr>
    <td>maf.openarchive.filterindex</td>
    <td>integer</td>
    <td>Drop down index for open dialog.</td>
  </tr>
  <tr>
    <td>maf.postsetup.0.3.0.complete</td>
    <td>boolean</td>
    <td>true if 0.3.0 postsetup has been called and completed.</td>
  </tr>
  <tr>
    <td>maf.postsetup.complete</td>
    <td>boolean</td>
    <td>true if 0.2.x postsetup has been called and completed.</td>
  </tr>
  <tr>
    <td>maf.savearchive.filterindex</td>
    <td>integer</td>
    <td>Drop down index for save archive dialog.</td>
  </tr>
  <tr>
    <td>maf.saveextendedmetadata</td>
    <td>boolean</td>
    <td>true if additional meta data, such as history, is saved in the archive.</td>
  </tr>
  <tr>
    <td>maf.temp</td>
    <td>string</td>
    <td>Full path to the temporary folder MAF uses for archiving and expanding files.</td>
  </tr>
  <tr>
    <td>maf.urlrewrite</td>
    <td>boolean</td>
    <td>true if MAF should attempt to re-write all the absolute URLs in a page when it loads to point to local archive copies instead.</td>
  </tr>
  <tr>
    <td>maf.wininvisible</td>
    <td>boolean</td>
    <td>true if you want to use wscript to hide the DOS box that appears when executing batch files.</td>
  </tr>
  <tr>
    <td>maf.wininvisiblevbs</td>
    <td>string</td>
    <td>Full path and filename of the invis.vbs included in the MAF installation.</td>
  </tr>
  <tr>
    <td>maf.winwscriptexe</td>
    <td>string</td>
    <td>Full path and filename of wscript.exe. It is the executable involked that is passed invis.vbs as a parameter.</td>
  </tr>
</table>

<a name="scripts" />
<h2>MAF scripts</h2>

<p>In order to perform the archive and expand operations scripts are called which in turn pass parameters to the programs that do the real work. Below is a description of the anatomy of the scripts for linux and windows. The scripts below are the ones included for use with Infozip's Zip and Unzip programs.</p>

<h3>Linux scripts</h3>

<p>There are two simple shell scripts that use zip and unzip located in the /usr/bin/ directory. Mafunzip.sh is below:
<pre>
#!/bin/sh
cd "/home/cottley/.mozilla/firefox/default.4cz/maf/maftemp"
/usr/bin/unzip "$1" -d "$2"
</pre>
<br/>
The second line of the script changes the current directory to the maftemp directory. All subsequent actions performed by the script are relative to this directory. This is created dynamically by the MAF postsetup utility function. The third line of the script calls unzip with the first parameter ($1) being the archive to expand and the second parameter ($2) being the directory to expand the contents into.
<br/><br/>
Mafzip.sh is below:
<pre>
#!/bin/sh
cd "/home/cottley/.mozilla/firefox/default.4cz/maf/maftemp"
/usr/bin/zip -r "$1" "$2"
</pre>
<br/>
The second line of the script changes the current directory to the maftemp directory. All subsequent actions performed by the script are relative to this directory. This is created dynamically by the MAF postsetup utility function. The third line of the script calls zip with the first parameter ($1) being the directory to zip and the second parameter ($2) being the archive to create or add to.
</p>

<h3>Windows scripts</h3>

<p>There are three scripts that are used by MAF on windows. Mafunzip.bat is below:
<pre>
cd /d "%%PROFILEDIR%%\maf\maftemp\"
..\unzip %1 -d %2
</pre>
<br />
Like the linux version above, this script changes to the maftemp directory and calls unzip (which is in the maf directory) with the first parameter (%1) being the archive to expand and the second parameter (%2) being the directory to expand the contents into. The %%PROFILEDIR%% is replaced with the Mozilla or Firefox profile directory when the postsetup is performed.
<br/><br/>
Mafzip.bat is below:
<pre>
cd /d "%%PROFILEDIR%%\maf\maftemp\"
..\zip -r %1 %2
</pre>
<br/>
Again, like the linux version above, this script changes to the maftemp directory and calls zip (which is in the maf directory) with the first parameter (%1) being the directory to zip and the second parameter (%2) being the archive to create or add to. The %%PROFILEDIR%% is replaced with the Mozilla or Firefox profile directory when the postsetup is performed.
<br/><br/>
invis.vbs is below:
<pre>
CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """ """
& WScript.Arguments(1) & """ """ & WScript.Arguments(2) & """", 0, True
</pre>
<br/>
This is the script that is run by wscript.exe. It takes as it's first argument (0), the batch file to run and the remaining arguments are for the batch file to work with (the directory to zip and the archive to create or the archive to expand and the directory to expand it into).
</p>

