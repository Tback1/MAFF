<!-- MAIN CONTENT -->
<div class="maf-column-contents">
  <h2 class="page-header">Documentation</h2>

<p><i><b>Note</b> - This document always covers the <a href="installation.html">latest
 version</a> of Mozilla Archive Format. Some features may not be available in
 the version from the Firefox Add-ons website.</i></p>
<ul>
  <li><a href="#introduction">Introduction</a>
    <ul>
      <li><a href="#saving">Saving web archives</a></li>
      <li><a href="#metadata">Additional information saved in web archives</a></li>
      <li><a href="#converting">Converting previously saved pages to web
       archive format</a></li>
      <li><a href="#opening">Opening web archives</a></li>
    </ul>
  </li>
  <li><a href="#extensions">Integration with other extensions</a></li>
  <li><a href="#preferences">Preferences</a>
    <ul>
      <li><a href="#main">Main preferences</a></li>
      <li><a href="#interface">Interface preferences</a></li>
      <li><a href="#fileassociations">File associations</a></li>
      <li><a href="#advanced">Advanced preferences</a></li>
    </ul>
  </li>
</ul>

<h2><a name="introduction"></a>Introduction</h2>
<p>Mozilla Archive Format, or MAF, is a Firefox extension that enables your
 browser to save, load and manage <i>web archives</i>. For a quick overview,
 have a look at the <a href="screenshots.html">screenshots page</a>.</p>
<p>Web archives are a convenient means to save and preserve web pages locally,
 since they allow you to store entire pages, including the images, in a single
 file. You can move around or rename a web archive without the risk of breaking
 the integrity of the saved pages it contains.</p>
<h3><a name="saving"></a>Saving web archives</h3>
<p>As soon as MAF is installed, you get two new options for the file type in
 the <i>Save As</i> dialog box:</p>
<img src="images/saveAsDialog.png" alt="">
<dl>
  <dt>Web Archive, MAFF zipped</dt>
  <dd>
    <p>This option allows you to save one or more pages inside a single Mozilla
     Archive Format File, or MAFF archive. This type of archive is compressed
     using the universal, cross-platform ZIP specification.</p>
    <p>You can open MAFF archives again in the browser (and you get some
     commodities like the ability to view the original location the page was
     saved from), or you can inspect and extract the archive's contents,
     including all the embedded media files, without the browser using any
     ordinary ZIP utility.</p>
    <p>The Mozilla Archive Format extension generates MAFF archives using the
     fast, native ZIP implementation embedded in the Mozilla browser. The
     resulting files are usually smaller than the equivalent MHTML archives,
     and opening this kind of files is faster.</p>
  </dd>
  <dt>Web Archive, MHTML</dt>
  <dd>
    <p>This option allows you to save a single page inside a MIME HTML file, or
     MHTML archive. This format is also known as MHT, and is the web archive
     format used by Internet Explorer.</p>
    <p>MHTML files are encoded, not compressed. The encoding usually increases
     the size of the saved media files, compared to the original. At present,
     the contents of an MHTML archive can be decoded only by a limited
     number of web browsers, or using specific utilities. However, this archive
     format can be exchanged more easily with Internet Explorer.</p>
    <p>Because of the technique used by MAF to save the web pages locally, the
     generated MHTML files are not 100% compatible with Internet Explorer. If
     you have the need to create this kind of files, the UnMHT extension can
     be installed together with MAF. UnMHT can save MHT files, however at
     present it is not integrated with the <i>Save As</i> dialog box of Firefox.
     See the <a href="http://www.unmht.org/unmht/en_index.html">extension's home
     page</a> for more information.</p>
  </dd>
</dl>
<h4><a name="metadata"></a>Additional information saved in web archives</h4>
<p>When you save a page as a web archive, the following additional information
 about the save operation is stored in the archive:</p>
<ul>
  <li>The <b>original location</b> the page was saved from. This normally
   matches what is displayed in the address bar of the browser.</li>
  <li>The <b>date and time</b> of the save operation.</li>
  <li>The <b>title</b> of the page, if present.</li>
  <li>The <b>character set</b> in effect at the time the page was saved. If the
   character set was changed manually using the <b>View &raquo; Character
   Encoding</b> menu item of Firefox, the custom choice is remembered. This
   allows the document to be displayed correctly when it is reopened from the
   archive, even if it contains internationalized characters.</li>
</ul>
<p>If you resave an already archived page to a different file, the save time and
 location from the original archive are preserved.</p>
<h4><a name="converting"></a>Converting previously saved pages to web archive
 format</h4>
<p>You probably already have some web pages saved among your local files. These
 pages are often stored as file&nbsp;/&nbsp;folder pairs (like
 <tt>Page.html</tt> and <tt>Page_files</tt>), and you may want to convert them
 to a web archive format for easier maintenance.</p>
<p>The conversion is as easy as opening the old pages in the browser, and
 resaving them as MAFF or MHTML. The information about the original save
 operation, if available, is preserved.</p>
<ul>
  <li>The <b>date and time</b> of the original save operation is obtained from
   the local file's last modification time.</li>
  <li>
    <p>The <b>original location</b> is obtained from the special comment some
     browsers embed in the page when they save it. If not available, the local
     address is used.</p>
    <p>If the page was saved with Internet Explorer, the original location is
     stored like <code>&lt;!-- saved from url=(0023)http://www.example.org/
     --&gt;</code>.</p>
    <p>If the page was saved using the standalone or the integrated Save
     Complete extension for Firefox, the original location is stored like
     <code>&lt;!-- Source is http://www.example.org/ --&gt;</code>.</p>
    <p>If the page was saved using Firefox without the Save Complete extension,
     the original location is not available.</p>
  </li>
</ul>
<h3><a name="opening"></a>Opening web archives</h3>
<p>By default, once MAF is installed, web archives can be opened using the
 ordinary <b>File &raquo; Open File</b> menu item of Firefox or using
 drag-and-drop, as you would open any other saved web page.</p>
<p>Under Windows, MAF can also create for you the
 <a href="#fileassociations">file associations</a> that allow opening the web
 archives by double-clicking them from Windows Explorer.</p>

<h2><a name="extensions"></a>Integration with other extensions</h2>
<p>One of the key features of Mozilla Archive Format is that it integrates not
 only with Firefox, but with other extensions as well, to provide a smooth user
 experience.</p>
<p>Some of these extensions, like UnMHT, must be installed separately; other
 extensions, like Save Complete, are embedded and updated together with MAF.</p>
<dl>
  <dt><a href="https://addons.mozilla.org/firefox/addon/4838">Multiple Tab
   Handler</a>, by Shimoda Hiroshi</dt>
  <dd>
    <p>This extension adds a multiple selection interface and a new context menu
     to the Firefox tab bar.</p>
    <p>MAF integrates with the tab selection context menu and adds an entry to
     save the selected tabs in an archive. For MHTML archives, MAF creates
     multiple files, while for MAFF archives all the tabs are saved in a
     single file.</p>
  </dd>
  <dt><a href="https://addons.mozilla.org/firefox/addon/4723">Save Complete</a>,
   by Stephen Augenstein</dt>
  <dd>
    <p><i>The Save Complete extension is integrated with MAF, but must be
     <a href="#savecomplete">enabled from the preferences</a>.</i></p>
    <p>This extension replaces the system used by the browser to save complete
     web pages. The new system correctly handles style sheets referencing image
     files, that otherwise would not be saved causing some pages to appear
     differently.</p>
  </dd>
  <dt><a href="https://addons.mozilla.org/firefox/addon/712">Title Save</a>, by
   <i>gm</i></dt>
  <dd>
    <p>This extension adds a new item in the <b>File</b> menu to use the title
     of the page instead of the file name in the <i>Save As</i> dialog box.</p>
    <p>You can use the new command to save MAFF and MHTML archives too.</p>
  </dd>
  <dt><a href="https://addons.mozilla.org/firefox/addon/8051">UnMHT</a>, by
   Arai</dt>
  <dd>
    <p>This extension adds new options in the <b>File</b> menu to save MHTML
     archives that are 100% compatible with Internet Explorer.</p>
    <p>If UnMHT is installed, you can continue to use MAF to create and open
     MAFF archives, while MHTML archives are opened with UnMHT.</p>
  </dd>
</dl>

<h2><a name="preferences"></a>Preferences</h2>
<p>The default settings in effect after installation are enough to allow correct
 loading and saving of both MAFF and MHTML archives. To enable or disable the
 integrated Save Complete extension, customize the interface, or modify advanced
 aspects of page loading and archiving, you can change the extension's
 preferences.</p>
<p>The preferences dialog can be accessed from the <b>Tools &raquo; Mozilla
 Archive Format &raquo; Preferences</b> menu item. If the <b>Mozilla Archive
 Format</b> submenu is not visible, you can open the preferences dialog using
 the <b>Options</b> button in the <i>Add-ons</i> dialog, available from the
 <b>Tools &raquo; Add-ons</b> menu item.</p>

<h3><a name="main"></a><a name="savecomplete"></a>Main preferences</h3>

<img src="images/prefsDialog-paneMain.png" alt="">

<dl>
  <dt>When saving complete web page contents:</dt>
  <dd>
    <p>This preference controls which method is used to find all the web
     resources (images, subpages, ...) that are included in the web page being
     saved. This step is preliminary to archiving all the resources in MAFF or
     MHTML format.</p>
    <p>You may change this preference if the saved pages seem to be really
     different from their original version, to achieve a better result.</p>
    <ol>
      <li><b>Use browser's standard save system</b> (default) - With this
       setting, the web pages are saved by the browser. How much of the web page
       is actually saved depends on the version of Firefox being used.</li>
      <li><b>Use the integrated "Save Complete" extension</b> - Allows more
       content to be saved, thanks to the integrated Save Complete extension
       written by Stephen Augenstein. Note that if you also have a standalone
       version of Save Complete installed, MAF will continue to use the
       integrated one. Improvements to Save Complete are periodically included
       in new versions of MAF.</li>
    </ol>
    <p>Note that the selected component will be used not only when saving
     archives, but also when saving complete pages using the <b>Save Page
     As</b>, <b>Web Page, complete</b> command of Firefox.</p>
  </dd>
  <dt>Save extended metadata in MAFF archives</dt>
  <dd>
    <p>With this preference enabled, additional page information such as
     history, text zoom and scroll position is saved for each page. There is
     currently no preference to restore this saved information as yet.</p>
  </dd>
</dl>

<h3><a name="interface"></a>Interface preferences</h3>

<img src="images/prefsDialog-paneInterface.png" alt="">

<dl>
  <dt>Show Mozilla Archive Format menu items in:</dt>
  <dd>
    <p>You can select which menus will display the Mozilla Archive Format items.
     If you disable the <b>Tab Bar Context Menu</b> option but enable the 
     <b>Page Context Menu</b> option, the tab-related menu items will appear in
     the page context menu instead of the tab bar.</p>
  </dd>
  <dt>Show these additional menu items:</dt>
  <dd>
    <p>The <b>Save In Archive</b> option enables displaying the additional
     <b>Save Page In Archive</b> and <b>Save Frame In Archive</b> menu items
     near the <b>Save Page As</b> and <b>Save Frame As</b> standard items,
     across all menus. These items open a special <i>Save As</i> dialog reserved
     for saving in archives, and are useful if you routinely use the standard
     <i>Save As</i> dialog to save only the text of a page, and need a separate
     option to save a page in an archive without changing the selection in the
     file type drop down list.
    <p>The <b>Save Page In Archive</b> and <b>Save Frame In Archive</b> menu
     items are always available under the <b>Tools &raquo; Mozilla Archive
     Format</b> menu, if visible, regardless of this preference.</p>
  </dd>
</dl>

<h3><a name="fileassociations"></a>File associations</h3>

<img src="images/prefsDialog-paneFileAssociations.png" alt="">

<dl>
  <dt>File associations</dt>
  <dd>
    <p>This preferences pane allows you to create or refresh file associations
     on Windows, for the MAFF and MHTML formats separately.</p>
    <p>File associations are always created explicitly for the current user of
     the system. In addition, if the current user has administration privileges,
     default file associations for all users are also created.</p>
    <p>File associations are not removed when uninstalling MAF of Firefox
     itself.</p>
  </dd>
</dl>

<h3><a name="advanced"></a>Advanced preferences</h3>

<img src="images/prefsDialog-paneAdvanced.png" alt="">

<dl>
  <dt>Temporary folder</dt>
  <dd>
    <p>This preference allows you to customize the location of the temporary
     files required to open and save the web archives.</p>
    <p>If unspecified, this location defaults to the <tt>maftemp</tt>
     subdirectory of the system temporary directory.</p>
    <p>If customized, the absolute path to the specified location is remembered.
     The contents of the selected folder will be lost if the <b>Clear temporary
     folder when browser exits</b> option is selected. There is usually no need
     to customize the temporary folder unless you use different Firefox profiles
     on the same computer at the same time.</p>
  </dd>
  <dt>Clear temporary folder when browser exits</dt>
  <dd>
    <p>This option is enabled by default. If disabled, the contents of the
     temporary directory are preserved after the browser exits, and must be
     cleaned up manually.</p>
  </dd>
  <dt>Rewrite absolute URLs in open archives</dt>
  <dd>
    <p>With this preference enabled, the archived web pages would be processed
     as they finish loading in tabs. The processing would replace absolute links
     to resources in the page with local resources in the archive (if possible).
     This would allow users to browse linked pages in an archive seamlessly.</p>
  </dd>
  <dt>Use the "jar:" protocol to access the contents of MAFF archives</dt>
  <dd>
    <p>If this preference is enabled, when you open a MAFF archive its contents
     will be accessed directly using the "jar:" protocol. The archive is still
     extracted to a temporary directory.</p>
    <p>If you enable this option, when you open an archive that contains
     multiple pages, the pages that are opened in other tabs will use a "jar:"
     URL instead of a "file:" URL. The "jar:" URL can be bookmarked and is valid
     until the archive is moved, while the "file:" URL is usually valid only
     during the current Firefox session.</p>
    <p>However, if you enable this option, the archive files you open will be
     locked, and you will be unable to move, rename or delete them until Firefox
     is closed.</p>
  </dd>
  <dt>Save using the .mhtml file extension instead of .mht by default</dt>
  <dd>
    <p>If this option selected, and you do not type a file extension in the
     <i>Save As</i> dialog box or file extensions are hidden, the complete
     <code class="maf-file-ext">.mhtml</code> extension will be appended to the
     file name of MHTML archives, instead of the more common
     <code class="maf-file-ext">.mht</code> extension.</p>
  </dd>
  <dt>Display welcome window at next startup</dt>
  <dd>
    <p>The welcome dialog is usually displayed only when MAF is installed for
     the first time. All the options that are set by the welcome dialog are also
     available from the preferences, thus it is usually not necessary to display
     the dialog again. This option is only provided as a convenience for
     translators in need of proofreading the text in the welcome dialog
     multiple times.</p>
  </dd>
</dl>

</div>